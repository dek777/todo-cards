{"version":3,"file":"js/548.d5b4bf81.js","mappings":"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","sources":["webpack://todo-list/./src/components/ToDoEditCard.vue","webpack://todo-list/./src/components/ToDoEditItem.vue","webpack://todo-list/./src/components/ToDoEditItem.vue?974e","webpack://todo-list/./src/components/ToDoEditCard.vue?7c5e","webpack://todo-list/./src/views/ToDoEditView.vue","webpack://todo-list/./src/views/ToDoEditView.vue?0984","webpack://todo-list/./src/mixins/utils.js"],"sourcesContent":["<template>\n  <div class=\"card__wrap\">\n    <div class=\"card__input\">\n      <input type=\"text\" v-model=\"editedCard.title\" />\n    </div>\n\n    <div v-if=\"todos.length\">\n      <p class=\"card__todos-title\">Список дел</p>\n      <ToDoEditItem\n        v-for=\"todo in todos\"\n        :key=\"todo.id\"\n        :item=\"todo\"\n        @changeItem=\"todoChange\"\n        @removeTodo=\"removeTodo\"\n      />\n    </div>\n    <div v-else class=\"card__todos_empty\">\n    </div>\n\n    <div class=\"card__add-todo\">\n      <div class=\"card__input\">\n        <input type=\"text\" v-model=\"newTodoText\" />\n      </div>\n      <button class=\"card__btn_save\" @click.prevent=\"addNewTodo\">Добавить</button>\n    </div>\n\n    <div class=\"card__footer\">\n      <button class=\"card__btn_save\" @click.prevent=\"showSaveConfirm\">Сохранить</button>\n      <a class=\"card__btn_cancel\" @click.prevent=\"showCancelConfirm\">Отмена</a>\n    </div>\n  </div>\n\n  <Confirm\n    :isOpen=\"confirmSettings.isOpen\"\n    :removeTypeConfirm=\"confirmSettings.removeTypeConfirm\"\n    @close=\"confirmSettings.isOpen = false\"\n    @confirm=\"saveChanges\"\n    @remove=\"cancelWithoutSaving\"\n  >\n    {{ confirmSettings.text }}\n  </Confirm>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport ToDoEditItem from '@/components/ToDoEditItem'\nimport Confirm from '@/components/Confirm'\nimport { generateId } from '@/mixins/utils'\n\nexport default {\n  components: {\n    ToDoEditItem, Confirm\n  },\n\n  props: {\n    card: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data () {\n    return {\n      todos: [],\n      deletedTodos: [],\n      editedCard: {\n        id: this.card.id,\n        title: this.card.title,\n      },\n      confirmSettings: {\n        isOpen: false,\n        removeTypeConfirm: false,\n        text: ''\n      },\n      newTodoText: ''\n    }\n  },\n\n  computed: {\n    ...mapGetters(['getTodosByCardId'])\n  },\n\n  mounted() {\n    this.todos = this.getTodosByCardId(this.card.id)\n  },\n\n  methods: {\n    todoChange (editedTodo) {\n      const todo = this.todos.find(todo => todo.id === editedTodo.id)\n\n      todo.text = editedTodo.text\n    },\n\n    removeTodo (todoId) {\n      const todo = this.todos.find(todo => todo.id === todoId)\n      const index = this.todos.indexOf(todo)\n\n      this.todos.splice(index, 1)\n      this.deletedTodos.push(todoId)\n    },\n\n    saveChanges () {\n      this.deletedTodos.forEach( id => this.$bus.emit('todos::removeElement', id))\n      this.todos.forEach( todo => this.$bus.emit('todos::updateElement', todo))\n      this.$bus.emit('cards::updateElement', this.editedCard)\n\n      this.$router.push({ name: 'list'})\n    },\n\n    addNewTodo () {\n      if (!this.newTodoText) {\n        return\n      }\n      this.todos.push({ id: generateId(), text: this.newTodoText, checked: false, cardId: this.editedCard.id })\n      this.newTodoText = ''\n    },\n\n    showCancelConfirm () {\n      this.confirmSettings = {\n        removeTypeConfirm: true,\n        text: 'Отменить изменения и выйти?',\n        isOpen: true\n      }\n    },\n\n    showSaveConfirm () {\n      this.confirmSettings = {\n        removeTypeConfirm: false,\n        text: 'Сохранить изменения и выйти?',\n        isOpen: true\n      }\n    },\n\n    cancelWithoutSaving () {\n      this.$router.push({ name: 'list'})\n    }\n\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.card {\n  &__wrap {\n    background-color: #fff;\n    border: 1px solid #000;\n    width: 100%;\n    max-width: 724px;\n    padding: 60px;\n    color: $item-text-color;\n    margin: auto;\n  }\n\n  &__input {\n    border: 1px solid #B0B0B0;\n    border-radius: 5px;\n    padding: 16px 20px;\n    flex: 1;\n\n    input {\n      @include font-template(20px, 500);\n    }\n  }\n\n  &__todos-title {\n    @include font-template(24px, 600);\n    margin: 58px 0 13px;\n  }\n\n  &__add-todo {\n    display: flex;\n    align-items: center;\n    padding: 58px 0 68px;\n  }\n\n  &__btn_save {\n    width: 170px;\n    height: 60px;\n    border-radius: 5px;\n    color: #fff;\n    background-color: $ok-btn-color;\n    @include font-template(20px, 500);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    transition: $transition;\n\n    &:hover {\n      background-color: $ok-btn-hover-color;\n    }\n\n    &:not(:first-child) {\n      margin-left: 16px;\n    }\n  }\n\n\n  &__footer {\n    display: flex;\n    align-items: center;\n  }\n\n  &__btn_cancel {\n    color: $item-text-color;\n    margin-left: 36px;\n    cursor: pointer;\n\n    &:hover {\n      color: #000;\n    }\n  }\n\n  &__todos_empty {\n    @include empty-list;\n  }\n}\n\n</style>","<template>\n  <div class=\"item-edit__wrap\" @dblclick=\"focusInput\">\n    <textarea\n      v-if=\"editMode\"\n      ref=\"input\"\n      class=\"item-edit__input\"\n      :style=\"{ 'height': textBlockHeight ? `${textBlockHeight}px` : 'auto'}\"\n      v-model=\"editedItem.text\"\n      @blur=\"inputBlur\"\n      @input=\"onInput\"\n    />\n    <p v-else ref=\"text\" :class=\"['item-edit__text', item.checked ? 'item-edit__text_stroked' : '']\">\n      {{item.text}}\n    </p>\n    <svg class=\"item-edit__remove-btn\" @click=\"removeClick\">\n      <use xlink:href=\"@/assets/icons/sprite.svg#remove\"></use>\n    </svg>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data () {\n    return {\n      editMode: false,\n      editedItem: {\n        id: this.item.id,\n        text: this.item.text\n      },\n      textBlockHeight: null\n    }\n  },\n\n  methods: {\n    focusInput () {\n      this.textBlockHeight = this.$refs.text.clientHeight\n      this.editMode = true\n      this.$nextTick(() => {\n        this.$refs.input.focus()\n      })\n    },\n\n    inputBlur () {\n      this.editMode = false\n    },\n\n    onInput () {\n      this.$emit('changeItem', this.editedItem)\n      this.changeHeight()\n    },\n\n    changeHeight () {\n      this.textBlockHeight = this.textBlockHeight < this.$refs.input.scrollHeight ? this.$refs.input.scrollHeight : this.textBlockHeight\n    },\n\n    removeClick() {\n      this.$emit('removeTodo', this.item.id)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.item-edit {\n  &__wrap {\n    padding: 0 35px 11px 0;\n    border-bottom: 1px solid #E8E8E8;\n    @include font-template(20px, 500);\n    position: relative;\n    margin-top: 27px;\n  }\n\n  &__input {\n    @include font-template(20px, 500);\n  }\n\n  &__text {\n    margin: 0;\n    word-break: break-word;\n\n    &_stroked {\n      @include stroked-text;\n      width: max-content;\n    }\n  }\n\n  &__remove-btn {\n    position: absolute;\n    content: '';\n    right: 0;\n    top: 0;\n    width: 25px;\n    height: 25px;\n    cursor: pointer;\n    stroke: $remove-btn-color;\n    transition: $transition;\n\n    &:hover {\n      stroke: $remove-btn-hover-color;\n    }\n  }\n}\n</style>","import { render } from \"./ToDoEditItem.vue?vue&type=template&id=be7b0058\"\nimport script from \"./ToDoEditItem.vue?vue&type=script&lang=js\"\nexport * from \"./ToDoEditItem.vue?vue&type=script&lang=js\"\n\nimport \"./ToDoEditItem.vue?vue&type=style&index=0&id=be7b0058&lang=scss\"\n\nimport exportComponent from \"/media/dek/CAE63689E636763315/www/todo-list/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToDoEditCard.vue?vue&type=template&id=39e5a93e&scoped=true\"\nimport script from \"./ToDoEditCard.vue?vue&type=script&lang=js\"\nexport * from \"./ToDoEditCard.vue?vue&type=script&lang=js\"\n\nimport \"./ToDoEditCard.vue?vue&type=style&index=0&id=39e5a93e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/media/dek/CAE63689E636763315/www/todo-list/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-39e5a93e\"]])\n\nexport default __exports__","<template>\n  <ToDoEditCard :card=\"getFromStateById({id: cardId, stateName: 'cards'})\" />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport ToDoEditCard from '@/components/ToDoEditCard'\n\nexport default {\n  name: 'ToDoEditView',\n\n  components: {\n    ToDoEditCard\n  },\n\n  data () {\n    return {\n      cardId: parseInt(this.$route.params.id)\n    }\n  },\n\n  computed: {\n    ...mapGetters(['getFromStateById'])\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n</style>","import { render } from \"./ToDoEditView.vue?vue&type=template&id=e1881d16\"\nimport script from \"./ToDoEditView.vue?vue&type=script&lang=js\"\nexport * from \"./ToDoEditView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/media/dek/CAE63689E636763315/www/todo-list/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export function generateId () {\n  return Math.floor(100000 + Math.random() * 900000)\n}"],"names":["class","type","editedCard","title","todos","todo","key","id","item","todoChange","removeTodo","newTodoText","addNewTodo","showSaveConfirm","showCancelConfirm","isOpen","confirmSettings","removeTypeConfirm","saveChanges","cancelWithoutSaving","text","focusInput","ref","style","textBlockHeight","editedItem","inputBlur","onInput","checked","removeClick","props","Object","required","data","editMode","this","methods","$refs","clientHeight","$nextTick","input","focus","$emit","changeHeight","scrollHeight","__exports__","components","ToDoEditItem","Confirm","card","deletedTodos","computed","mounted","getTodosByCardId","editedTodo","find","todoId","index","indexOf","splice","push","forEach","$bus","emit","$router","name","cardId","render","getFromStateById","stateName","ToDoEditCard","parseInt","$route","params","generateId","Math","floor","random"],"sourceRoot":""}